namespace = zenith

#Ascended Empires encountering other empires
country_event = {
	id = zenith.31
	hide_window = yes
	is_triggered_only = yes

	trigger = {
				OR = {
					is_country_type = ascended_empire
						
				}
		from = {
				OR = {
					is_country_type = default
					is_country_type = fallen_empire
					is_country_type = awakened_empire
					is_country_type = ascended_empire 
				}
				NOT = { has_communications = root }
		}
	}

	immediate = {
		establish_communications_no_message = from
		from = { save_event_target_as = contact_empire }
		country_event = { id = action.1 }
	}
}

#Flip planets to AE starbase owner
event = {
	id = zenith.85
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_country = {
			NOT = { is_country_type = primitive }
			any_owned_planet = {
				exists = starbase
				starbase = {
					owner = {
						NOR = {
							is_same_value = prevprevprev
							is_at_war_with = prevprevprev
						}
					}
				}
			}
		}
	}

	immediate = {
		every_planet = {
			limit = {
				exists = owner
				owner = {
					OR = {
						is_country_type = default
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
						is_country_type = ascended_empire
						is_country_type = lost_empire
					}
				}
				exists = starbase
				starbase = {
					exists = owner
					owner = {
						OR = {
							is_country_type = default
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
							is_country_type = ascended_empire
							is_country_type = lost_empire
						}					
						NOR = {
							is_same_value = prevprev.owner
							is_at_war_with = prevprev.owner
						}
					}
				}
			}
			planet_event = { id = action.86 } # planet flips to starbase owner
		}
	}
}