namespace = kiyo_event_spy

#Primitives Get Extra Spy
country_event = {
	id = kiyo_event_spy.987
	hide_window = yes
	
	trigger = {
		is_country_type = primitive
		NOT = { has_country_flag = kiyo_spy_primitive }
	}
	
	immediate = { set_country_flag = kiyo_spy_primitive }
}

#Spy Leaves Good Relation Empire
country_event = {
	id = kiyo_event_spy.0
	title = kiyo_event_spy.0.title
	desc = kiyo_event_spy.0.desc
	picture = GFX_evt_arguing_senate
	
	trigger = {
		has_country_flag = kiyo_spy_active_window
		any_country = {
			is_country_type = default
			root = { has_communications = prev }
			OR = {
				reverse_has_relation_flag = { who = root flag = kiyo_spy_spy1 }
				reverse_has_relation_flag = { who = root flag = kiyo_spy_spy2 }
				reverse_has_relation_flag = { who = root flag = kiyo_spy_spy3 }
				reverse_has_relation_flag = { who = root flag = kiyo_spy_spy4 }
			}
			OR = {
				has_defensive_pact = root
				is_in_federation_with = root
				root = { is_guaranteeing = prev }
			}
		}
		NOT = {
			any_country = {
				OR = {
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_bomb_a }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_bomb_b }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_toxic_a }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_toxic_b }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_leak_a }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_leak_b }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_miner_a }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_miner_b }
				}
			}
		}
	}
	
	immediate = {
		random_country = {
			limit = {
				is_country_type = default
				root = { has_communications = prev }
				OR = {
					reverse_has_relation_flag = { who = root flag = kiyo_spy_spy1 }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_spy2 }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_spy3 }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_spy4 }
				}
				OR = {
					has_defensive_pact = root
					is_in_federation_with = root
					root = { is_guaranteeing = prev }
				}
				NOR = {
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_bomb_a }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_bomb_b }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_toxic_a }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_toxic_b }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_leak_a }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_leak_b }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_miner_a }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_active_miner_b }

				}
			}
			save_event_target_as = spyTarget
		}
		set_timed_relation_flag = { flag = kiyo_spy_nospy who = event_target:spyTarget days = 360 }
		kiyo_spy_remove_spy = yes
	}
	
	option = {
		name = OK
	}
}

#Espionage Main Menu
country_event = {
	id = kiyo_event_spy.1
	title = kiyo_event_spy.1.title
	desc = kiyo_event_spy.1.desc
	picture = GFX_evt_arguing_senate
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		NOT = { has_country_flag = kiyo_spy_window }
	}
	
	immediate = {
		kiyo_spy_calculate_spy = yes
		
		#random valid country becomes potential target
		random_country = {
			limit = {
				is_country_type = default
				root = { has_communications = prev }
				NOR = {
					is_country = root
					reverse_has_relation_flag = { who = root flag = kiyo_spy_spy1 }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_spy2 }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_spy3 }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_spy4 }
					has_defensive_pact = root
					is_in_federation_with = root
					root = { is_guaranteeing = prev }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_nospy }
				}
			}
			save_event_target_as = spyTarget
		}
	}
	
	option = {
		name = kiyo_event_spy.1.a
		trigger = {
			NOT = { has_country_flag = kiyo_spy_window }
			exists = event_target:spyTarget
		}
		ai_chance = {
			factor = 100
		}
		
		hidden_effect = {
			if = {
				limit = { any_country = { NOT = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy1 } } } }
				set_relation_flag = { who = event_target:spyTarget flag = kiyo_spy_spy1 }
			}
			else_if = {
				limit = { any_country = { NOT = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy2 } } } }
				set_relation_flag = { who = event_target:spyTarget flag = kiyo_spy_spy2 }
			}
			else_if = {
				limit = { any_country = { NOT = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy3 } } } }
				set_relation_flag = { who = event_target:spyTarget flag = kiyo_spy_spy3 }
			}
			else_if = {
				limit = { any_country = { NOT = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy4 } } } }
				set_relation_flag = { who = event_target:spyTarget flag = kiyo_spy_spy4 }
			}
			kiyo_spy_calculate_spy = yes
		}
	}
			
	option = {
		name = kiyo_event_spy.1.b
		trigger = {
			NOR = {
				has_country_flag = kiyo_spy_window
				has_country_flag = kiyo_spy_active_window
				any_country = {
					OR = {
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_1 }
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_2 }
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_3 }
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_4 }
					}
				}
				any_country = {
					OR = {
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_bomb_a }
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_bomb_b }
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_toxic_a }
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_toxic_b }
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_leak_a }
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_leak_b }
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_miner_a }
						reverse_has_relation_flag = { who = root flag = kiyo_spy_active_miner_b }
					}
				}
			}
		}
		ai_chance = {
			factor = 0
		}
		
		hidden_effect = {
			country_event = { id = kiyo_event_spy.11 }
		}
	}
	
	option = {
		name = NOTIME
		custom_tooltip = kiyo_event_spy.1.c.tooltip
		
		hidden_effect = {
			set_timed_relation_flag = { flag = kiyo_spy_nospy who = event_target:spyTarget days = 360 }
			remove_country_flag = kiyo_spy_window
		}
	}
}

#View Spy Target Info
country_event = {
	id = kiyo_event_spy.11
	title = kiyo_event_spy.11.title
	desc = kiyo_event_spy.11.desc
	picture = GFX_evt_arguing_senate
	is_triggered_only = yes
	
	immediate = {
		random_country = { limit = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy1 } } save_event_target_as = spyTarget1 }
		random_country = { limit = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy2 } } save_event_target_as = spyTarget2 }
		random_country = { limit = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy3 } } save_event_target_as = spyTarget3 }
		random_country = { limit = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy4 } } save_event_target_as = spyTarget4 }
	}
	
	option = {
		name = kiyo_event_spy.11.a
		trigger = { any_country = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy1 } } }
		
		hidden_effect = {
			country_event = { id = kiyo_event_spy.111 }
			set_country_flag = kiyo_spy_window_spy1
		}
	}
	
	option = {
		name = kiyo_event_spy.11.b
		trigger = { any_country = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy2 } } }
		
		hidden_effect = {
			country_event = { id = kiyo_event_spy.112 }
			set_country_flag = kiyo_spy_window_spy2
		}
	}
	
	option = {
		name = kiyo_event_spy.11.c
		trigger = { any_country = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy3 } } }
		
		hidden_effect = {
			country_event = { id = kiyo_event_spy.113 }
			set_country_flag = kiyo_spy_window_spy3
		}
	}
	
	option = {
		name = kiyo_event_spy.11.d
		trigger = { any_country = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy4 } } }
		
		hidden_effect = {
			country_event = { id = kiyo_event_spy.114 }
			set_country_flag = kiyo_spy_window_spy4
		}
	}
	
	option = {
		name = kiyo_event_spy.11.e
		
		hidden_effect = { remove_country_flag = kiyo_spy_window }
	}
}

#Spy Target #1
country_event = {
	id = kiyo_event_spy.111
	title = kiyo_event_spy.111.title
	desc = kiyo_event_spy.111.desc
	picture = GFX_evt_arguing_senate
	is_triggered_only = yes
	
	immediate = {
		random_country = {
			limit = {
				reverse_has_relation_flag = { who = root flag = kiyo_spy_spy1 }
			}
			kiyo_spy_set_intrigue = yes
			kiyo_spy_calculate_minerals = yes
			kiyo_spy_calculate_energy = yes
			kiyo_spy_calculate_physics_research = yes
			kiyo_spy_calculate_society_research = yes
			kiyo_spy_calculate_engineering_research = yes
			kiyo_spy_calculate_ascension = yes
			kiyo_spy_calculate_fleet = yes
		}
	}
	
	option = {
		name = kiyo_event_spy.11.e
		
		hidden_effect = {
			remove_country_flag = kiyo_spy_window
			remove_country_flag = kiyo_spy_window_spy1
		}
	}
	
	option = {
		name = kiyo_event_spy.11.remove
		custom_tooltip = kiyo_event_spy.11.tooltip
		
		hidden_effect = {
			set_timed_relation_flag = { flag = kiyo_spy_nospy who = event_target:spyTarget1 days = 360 }
			kiyo_spy_remove_spy = yes
			remove_country_flag = kiyo_spy_window_spy1
			remove_country_flag = kiyo_spy_window
		}
	}
}

#Spy Target #2
country_event = {
	id = kiyo_event_spy.112
	title = kiyo_event_spy.112.title
	desc = kiyo_event_spy.112.desc
	picture = GFX_evt_arguing_senate
	is_triggered_only = yes
	
	immediate = {
		random_country = {
			limit = {
				reverse_has_relation_flag = { who = root flag = kiyo_spy_spy2 }
			}
			kiyo_spy_set_intrigue = yes
			kiyo_spy_calculate_minerals = yes
			kiyo_spy_calculate_energy = yes
			kiyo_spy_calculate_physics_research = yes
			kiyo_spy_calculate_society_research = yes
			kiyo_spy_calculate_engineering_research = yes
			kiyo_spy_calculate_ascension = yes
			kiyo_spy_calculate_fleet = yes
		}
	}
	
	option = {
		name = kiyo_event_spy.11.e
		
		hidden_effect = {
			remove_country_flag = kiyo_spy_window
			remove_country_flag = kiyo_spy_window_spy2
		}
	}
	
	option = {
		name = kiyo_event_spy.11.remove
		custom_tooltip = kiyo_event_spy.11.tooltip
		
		hidden_effect = {
			set_timed_relation_flag = { flag = kiyo_spy_nospy who = event_target:spyTarget2 days = 360 }
			kiyo_spy_remove_spy = yes
			remove_country_flag = kiyo_spy_window_spy2
			remove_country_flag = kiyo_spy_window
		}
	}
}

#Spy Target #3
country_event = {
	id = kiyo_event_spy.113
	title = kiyo_event_spy.113.title
	desc = kiyo_event_spy.113.desc
	picture = GFX_evt_arguing_senate
	is_triggered_only = yes
	
	immediate = {
		random_country = {
			limit = {
				reverse_has_relation_flag = { who = root flag = kiyo_spy_spy3 }
			}
			kiyo_spy_set_intrigue = yes
			kiyo_spy_calculate_minerals = yes
			kiyo_spy_calculate_energy = yes
			kiyo_spy_calculate_physics_research = yes
			kiyo_spy_calculate_society_research = yes
			kiyo_spy_calculate_engineering_research = yes
			kiyo_spy_calculate_ascension = yes
			kiyo_spy_calculate_fleet = yes
		}
	}
	
	option = {
		name = kiyo_event_spy.11.e
		
		hidden_effect = {
			remove_country_flag = kiyo_spy_window
			remove_country_flag = kiyo_spy_window_spy3
		}
	}
	
	option = {
		name = kiyo_event_spy.11.remove
		custom_tooltip = kiyo_event_spy.11.tooltip
		
		hidden_effect = {
			set_timed_relation_flag = { flag = kiyo_spy_nospy who = event_target:spyTarget3 days = 360 }
			kiyo_spy_remove_spy = yes
			remove_country_flag = kiyo_spy_window_spy3
			remove_country_flag = kiyo_spy_window
		}
	}
}

#Spy Target #4
country_event = {
	id = kiyo_event_spy.114
	title = kiyo_event_spy.114.title
	desc = kiyo_event_spy.114.desc
	picture = GFX_evt_arguing_senate
	is_triggered_only = yes
	
	immediate = {
		random_country = {
			limit = {
				reverse_has_relation_flag = { who = root flag = kiyo_spy_spy4 }
			}
			kiyo_spy_set_intrigue = yes
			kiyo_spy_calculate_minerals = yes
			kiyo_spy_calculate_energy = yes
			kiyo_spy_calculate_physics_research = yes
			kiyo_spy_calculate_society_research = yes
			kiyo_spy_calculate_engineering_research = yes
			kiyo_spy_calculate_ascension = yes
			kiyo_spy_calculate_fleet = yes
		}
	}
	
	option = {
		name = kiyo_event_spy.11.e
		
		hidden_effect = {
			remove_country_flag = kiyo_spy_window
			remove_country_flag = kiyo_spy_window_spy4
		}
	}
	
	option = {
		name = kiyo_event_spy.11.remove
		custom_tooltip = kiyo_event_spy.11.tooltip
		
		hidden_effect = {
			set_timed_relation_flag = { flag = kiyo_spy_nospy who = event_target:spyTarget4 days = 360 }
			kiyo_spy_remove_spy = yes
			remove_country_flag = kiyo_spy_window_spy4
			remove_country_flag = kiyo_spy_window
		}
	}
}

#5 year pulse trigger
event = {
	id = kiyo_event_spy.123
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = {
				is_country_type = default
				any_country = {
					is_country_type = default
					prev = { has_communications = prev }
				}
			}
			country_event = { id = kiyo_event_spy.21 }
			country_event = { id = kiyo_event_spy.31 }
			country_event = { id = kiyo_event_spy.41 }
			country_event = { id = kiyo_event_spy.51 }
			country_event = { id = kiyo_event_spy.61 }
			country_event = { id = kiyo_event_spy.91 }
			country_event = { id = kiyo_event_spy.1000 }
		}
	}
}

#10 year pulse trigger
event = {
	id = kiyo_event_spy.456
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = {
				is_country_type = default
				any_country = {
					is_country_type = default
					prev = { has_communications = prev }
				}
			}
			country_event = { id = kiyo_event_spy.71 }
			country_event = { id = kiyo_event_spy.81 }
		}
	}
}

#Scandal
country_event = {
	id = kiyo_event_spy.21
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		any_country = {
			is_country_type = default
			has_communications = root
		}
		NOR = {
			has_ethic = ethic_gestalt_consciousness
			has_country_flag = kiyo_spy_scandal
			has_country_flag = kiyo_spy_scandal_end
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_country = {
					is_country_type = default
					has_communications = root
				}
			}
			random_list = {
				40 = {
					set_country_flag = kiyo_spy_scandal
					random_country = {
						limit = {
							NOT = { is_country = root }
							OR = {
								has_relation_flag = { who = root flag = kiyo_spy_spy1 }
								has_relation_flag = { who = root flag = kiyo_spy_spy2 }
								has_relation_flag = { who = root flag = kiyo_spy_spy3 }
								has_relation_flag = { who = root flag = kiyo_spy_spy4 }
							}
						}
						save_event_target_as = spyEmpire
						root = { save_event_target_as = spyVictim }
						country_event = { id = kiyo_event_spy.211 }
					}
					if = {
						limit = { any_country = { NOT = { has_relation_flag = { who = root flag = kiyo_spy_scandal } } } }
						random_list = {
							40 = { country_event = { id = kiyo_event_spy.213 days = 1440 random = 360 } }
							60 = { remove_country_flag = kiyo_spy_scandal }
						}
					}
				}
				60 = {}
			}
		}
	}
}

#Scandal Spy Intervention
country_event = {
	id = kiyo_event_spy.211
	title = kiyo_event_spy.211.title
	desc = kiyo_event_spy.211.desc
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.211.a
		custom_tooltip = kiyo_event_spy.211.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_scandal_a days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_scandal_a } }
				country_event = { id = kiyo_event_spy.213 days = 1440 random = 360 }
			}
		}
	}
	
	option = {
		name = kiyo_event_spy.211.b
		custom_tooltip = kiyo_event_spy.211.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_scandal_b days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_scandal_b } }
				country_event = { id = kiyo_event_spy.213 days = 1440 random = 360 }
			}
		}
	}
}

#Scandal Regular
country_event = {
	id = kiyo_event_spy.213
	title = kiyo_event_spy.213.title
	desc = kiyo_event_spy.213.desc
	picture = GFX_evt_news_room
	is_triggered_only = yes
	
	immediate = {
		random_owned_leader = {
			set_leader_flag = kiyo_spy_scandal_leader
			save_event_target_as = kiyo_spy_scandal_leader
		}
	}
	
	option = {
		name = kiyo_event_spy.213.a
		custom_tooltip = kiyo_event_spy.213.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_scandal_victim_a
			country_event = { id = kiyo_event_spy.215 days = 30 random = 30 }
		}
	}
	
	option = {
		name = kiyo_event_spy.213.b
		custom_tooltip = kiyo_event_spy.213.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_scandal_victim_b
			country_event = { id = kiyo_event_spy.215 days = 30 random = 30 }
		}
	}
}

#Scandal Results Regular
country_event = {
	id = kiyo_event_spy.215
	title = kiyo_event_spy.215.title
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_b }
					has_country_flag = kiyo_spy_scandal_victim_a
				}
			}
		}
		text = kiyo_event_spy.215.descgooda
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_a }
			has_country_flag = kiyo_spy_scandal_victim_a
		}
		text = kiyo_event_spy.215.descbada
	}
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_a }
					has_country_flag = kiyo_spy_scandal_victim_b
				}
			}
		}
		text = kiyo_event_spy.215.descgoodb
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_b }
			has_country_flag = kiyo_spy_scandal_victim_b
		}
		text = kiyo_event_spy.215.descbadb
	}
	picture = GFX_evt_news_room
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_b }
						has_country_flag = kiyo_spy_scandal_victim_a
					}
				}
			}
			add_modifier = { modifier = kiyo_spy_scandal_trial_good days = 1800 }
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_a }
				has_country_flag = kiyo_spy_scandal_victim_a
			}
			add_modifier = { modifier = kiyo_spy_scandal_bad days = 1800 }
			event_target:spyEmpire = {
				add_influence = 100
				if = {
					limit = {
						OR = {
							has_relation_flag = { who = root flag = kiyo_spy_intrigue3 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue4 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue5 }
						}
					}
					add_influence = 100
				}
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		else_if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_a }
						has_country_flag = kiyo_spy_scandal_victim_b
					}
				}
			}
			every_owned_leader = {
				limit = { has_leader_flag = kiyo_spy_scandal_leader }
				add_experience = 200
				remove_leader_flag = kiyo_spy_scandal_leader
			}
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_b }
				has_country_flag = kiyo_spy_scandal_victim_b
			}
			add_modifier = { modifier = kiyo_spy_scandal_bad days = 1800 }
			event_target:spyEmpire = {
				add_influence = 100
				if = {
					limit = {
						OR = {
							has_relation_flag = { who = root flag = kiyo_spy_intrigue3 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue4 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue5 }
						}
					}
					add_influence = 100
				}
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		remove_country_flag = kiyo_spy_scandal
		set_timed_country_flag = { flag = kiyo_spy_scandal_end days = 1800 }
	}
	
	option = {
		name = GOOD
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_b }
					has_country_flag = kiyo_spy_scandal_victim_a
				}
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_a }
					has_country_flag = kiyo_spy_scandal_victim_b
				}
			}
		}
		
		hidden_effect = {
			if = {
				limit = { exists = event_target:spyEmpire }
				event_target:spyEmpire = {
					remove_relation_flag = { who = root flag = kiyo_spy_scandal_a }
					remove_relation_flag = { who = root flag = kiyo_spy_scandal_b }
				}
			}
			remove_country_flag = kiyo_spy_scandal_victim_a
			remove_country_flag = kiyo_spy_scandal_victim_b
		}
	}
	
	option = {
		name = UNFORTUNATE
		trigger = {
			OR = {
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_a }
					has_country_flag = kiyo_spy_scandal_victim_a
				}
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_scandal_b }
					has_country_flag = kiyo_spy_scandal_victim_b
				}
			}
		}
		
		hidden_effect = {
			event_target:spyEmpire = {
				remove_relation_flag = { who = root flag = kiyo_spy_scandal_a }
				remove_relation_flag = { who = root flag = kiyo_spy_scandal_b }
			}
			remove_country_flag = kiyo_spy_scandal_victim_a
			remove_country_flag = kiyo_spy_scandal_victim_b
		}
	}
}

#Drone Interference
country_event = {
	id = kiyo_event_spy.31
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		any_country = {
			is_country_type = default
			has_communications = root
		}
		has_ethic = ethic_gestalt_consciousness
		NOR = {
			has_country_flag = kiyo_spy_drone
			has_country_flag = kiyo_spy_drone_end
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_country = {
					is_country_type = default
					has_communications = root
				}
			}
			random_list = {
				40 = {
					set_country_flag = kiyo_spy_drone
					random_country = {
						limit = {
							NOT = { is_country = root }
							OR = {
								has_relation_flag = { who = root flag = kiyo_spy_spy1 }
								has_relation_flag = { who = root flag = kiyo_spy_spy2 }
								has_relation_flag = { who = root flag = kiyo_spy_spy3 }
								has_relation_flag = { who = root flag = kiyo_spy_spy4 }
							}
						}
						save_event_target_as = spyEmpire
						root = { save_event_target_as = spyVictim }
						country_event = { id = kiyo_event_spy.311 }
					}
					if = {
						limit = { any_country = { NOT = { has_relation_flag = { who = root flag = kiyo_spy_drone } } } }
						random_list = {
							40 = { country_event = { id = kiyo_event_spy.313 days = 1440 random = 360 } }
							60 = { remove_country_flag = kiyo_spy_drone }
						}
					}
				}
				60 = {}
			}
		}
	}
}

#Drone Interference Spy Intervention
country_event = {
	id = kiyo_event_spy.311
	title = kiyo_event_spy.311.title
	desc = kiyo_event_spy.311.desc
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.311.a
		custom_tooltip = kiyo_event_spy.311.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_drone_a days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_drone_a } }
				country_event = { id = kiyo_event_spy.313 days = 1440 random = 360 }
			}
		}
	}
	
	option = {
		name = kiyo_event_spy.311.b
		custom_tooltip = kiyo_event_spy.311.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_drone_b days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_drone_b } }
				country_event = { id = kiyo_event_spy.313 days = 1440 random = 360 }
			}
		}
	}
}

#Drone Interference Regular
country_event = {
	id = kiyo_event_spy.313
	title = kiyo_event_spy.313.title
	desc = kiyo_event_spy.313.desc
	picture = GFX_evt_hive_mind
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.313.a
		custom_tooltip = kiyo_event_spy.313.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_drone_victim_a
			country_event = { id = kiyo_event_spy.315 days = 30 random = 30 }
		}
	}
	
	option = {
		name = kiyo_event_spy.313.b
		custom_tooltip = kiyo_event_spy.313.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_drone_victim_b
			country_event = { id = kiyo_event_spy.315 days = 30 random = 30 }
		}
	}
}

#Drone Interference Results Regular
country_event = {
	id = kiyo_event_spy.315
	title = kiyo_event_spy.315.title
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_b }
					has_country_flag = kiyo_spy_drone_victim_a
				}
			}
		}
		text = kiyo_event_spy.315.descgooda
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_a }
			has_country_flag = kiyo_spy_drone_victim_a
		}
		text = kiyo_event_spy.315.descbada
	}
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_a }
					has_country_flag = kiyo_spy_drone_victim_b
				}
			}
		}
		text = kiyo_event_spy.315.descgoodb
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_b }
			has_country_flag = kiyo_spy_drone_victim_b
		}
		text = kiyo_event_spy.315.descbadb
	}
	picture = GFX_evt_hive_mind
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_b }
						has_country_flag = kiyo_spy_drone_victim_a
					}
				}
			}
			add_modifier = { modifier = kiyo_spy_drone_building_good days = 1800 }
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_a }
				has_country_flag = kiyo_spy_drone_victim_a
			}
			add_modifier = { modifier = kiyo_spy_drone_bad days = 1800 }
			event_target:spyEmpire = {
				add_influence = 100
				if = {
					limit = {
						OR = {
							has_relation_flag = { who = root flag = kiyo_spy_intrigue3 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue4 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue5 }
						}
					}
					add_influence = 100
				}
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		else_if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_a }
						has_country_flag = kiyo_spy_drone_victim_b
					}
				}
			}
			add_modifier = { modifier = kiyo_spy_drone_vital_good days = 1800 }
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_b }
				has_country_flag = kiyo_spy_drone_victim_b
			}
			add_modifier = { modifier = kiyo_spy_drone_bad days = 1800 }
			event_target:spyEmpire = {
				add_influence = 100
				if = {
					limit = {
						OR = {
							has_relation_flag = { who = root flag = kiyo_spy_intrigue3 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue4 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue5 }
						}
					}
					add_influence = 100
				}
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		remove_country_flag = kiyo_spy_drone
		set_timed_country_flag = { flag = kiyo_spy_drone_end days = 1800 }
	}
	
	option = {
		name = MARVELOUS
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_b }
					has_country_flag = kiyo_spy_drone_victim_a
				}
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_a }
					has_country_flag = kiyo_spy_drone_victim_b
				}
			}
		}
		
		hidden_effect = {
			if = {
				limit = { exists = event_target:spyEmpire }
				event_target:spyEmpire = {
					remove_relation_flag = { who = root flag = kiyo_spy_drone_a }
					remove_relation_flag = { who = root flag = kiyo_spy_drone_b }
				}
			}
			remove_country_flag = kiyo_spy_drone_victim_a
			remove_country_flag = kiyo_spy_drone_victim_b
		}
	}
	
	option = {
		name = UNFORTUNATE
		trigger = {
			OR = {
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_a }
					has_country_flag = kiyo_spy_drone_victim_a
				}
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_drone_b }
					has_country_flag = kiyo_spy_drone_victim_b
				}
			}
		}
		
		hidden_effect = {
			event_target:spyEmpire = {
				remove_relation_flag = { who = root flag = kiyo_spy_drone_a }
				remove_relation_flag = { who = root flag = kiyo_spy_drone_b }
			}
			remove_country_flag = kiyo_spy_drone_victim_a
			remove_country_flag = kiyo_spy_drone_victim_b
		}
	}
}

#Upstart Company
country_event = {
	id = kiyo_event_spy.41
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		any_country = {
			is_country_type = default
			has_communications = root
		}
		NOR = {
			has_ethic = ethic_gestalt_consciousness
			has_country_flag = kiyo_spy_company
			has_country_flag = kiyo_spy_company_end
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_country = {
					is_country_type = default
					has_communications = root
				}
			}
			random_list = {
				30 = {
					set_country_flag = kiyo_spy_company
					random_country = {
						limit = {
							NOT = { is_country = root }
							OR = {
								has_relation_flag = { who = root flag = kiyo_spy_spy1 }
								has_relation_flag = { who = root flag = kiyo_spy_spy2 }
								has_relation_flag = { who = root flag = kiyo_spy_spy3 }
								has_relation_flag = { who = root flag = kiyo_spy_spy4 }
							}
						}
						save_event_target_as = spyEmpire
						root = { save_event_target_as = spyVictim }
						country_event = { id = kiyo_event_spy.411 }
					}
					if = {
						limit = { any_country = { NOT = { has_relation_flag = { who = root flag = kiyo_spy_company } } } }
						random_list = {
							40 = { country_event = { id = kiyo_event_spy.413 days = 1440 random = 360 } }
							60 = { remove_country_flag = kiyo_spy_company }
						}
					}
				}
				70 = {}
			}
		}
	}
}

#Upstart Company Spy Intervention
country_event = {
	id = kiyo_event_spy.411
	title = kiyo_event_spy.411.title
	desc = kiyo_event_spy.411.desc
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.411.a
		custom_tooltip = kiyo_event_spy.411.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_company_a days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_company_a } }
				country_event = { id = kiyo_event_spy.413 days = 1440 random = 360 }
			}
		}
	}
	
	option = {
		name = kiyo_event_spy.411.b
		custom_tooltip = kiyo_event_spy.411.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_company_b days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_company_b } }
				country_event = { id = kiyo_event_spy.413 days = 1440 random = 360 }
			}
		}
	}
}

#Upstart Company Regular
country_event = {
	id = kiyo_event_spy.413
	title = kiyo_event_spy.413.title
	desc = kiyo_event_spy.413.desc
	picture = GFX_evt_throne_room
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.413.a
		custom_tooltip = kiyo_event_spy.413.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_company_victim_a
			country_event = { id = kiyo_event_spy.415 days = 30 random = 30 }
		}
	}
	
	option = {
		name = kiyo_event_spy.413.b
		custom_tooltip = kiyo_event_spy.413.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_company_victim_b
			country_event = { id = kiyo_event_spy.415 days = 30 random = 30 }
		}
	}
}

#Upstart Company Results Regular
country_event = {
	id = kiyo_event_spy.415
	title = kiyo_event_spy.415.title
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_b }
					has_country_flag = kiyo_spy_company_victim_a
				}
			}
		}
		text = kiyo_event_spy.415.descgooda
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_a }
			has_country_flag = kiyo_spy_company_victim_a
		}
		text = kiyo_event_spy.415.descbada
	}
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_a }
					has_country_flag = kiyo_spy_company_victim_b
				}
			}
		}
		text = kiyo_event_spy.415.descgoodb
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_b }
			has_country_flag = kiyo_spy_company_victim_b
		}
		text = kiyo_event_spy.415.descbadb
	}
	picture = GFX_evt_alien_city
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_b }
						has_country_flag = kiyo_spy_company_victim_a
					}
				}
			}
			add_monthly_resource_mult = { resource = minerals value = 12 min = 400 max = 3000 }
			add_monthly_resource_mult = { resource = energy value = 12 min = 400 max = 3000 }
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_a }
				has_country_flag = kiyo_spy_company_victim_a
			}
			event_target:spyEmpire = {
				add_monthly_resource_mult = { resource = minerals value = 12 min = 400 max = 3000 }
				add_monthly_resource_mult = { resource = energy value = 12 min = 400 max = 3000 }
				if = {
					limit = {
						OR = {
							has_relation_flag = { who = root flag = kiyo_spy_intrigue3 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue4 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue5 }
						}
					}
					add_monthly_resource_mult = { resource = minerals value = 12 min = 400 max = 3000 }
					add_monthly_resource_mult = { resource = energy value = 12 min = 400 max = 3000 }
				}
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		else_if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_a }
						has_country_flag = kiyo_spy_company_victim_b
					}
				}
			}
			add_influence = 100
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_b }
				has_country_flag = kiyo_spy_company_victim_b
			}
			event_target:spyEmpire = {
				add_influence = 100
				if = {
					limit = {
						OR = {
							has_relation_flag = { who = root flag = kiyo_spy_intrigue3 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue4 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue5 }
						}
					}
					add_influence = 100
				}
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		remove_country_flag = kiyo_spy_company
		set_timed_country_flag = { flag = kiyo_spy_company_end days = 1800 }
	}
	
	option = {
		name = INTERESTING
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_b }
					has_country_flag = kiyo_spy_company_victim_a
				}
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_a }
					has_country_flag = kiyo_spy_company_victim_b
				}
			}
		}
		
		hidden_effect = {
			if = {
				limit = { exists = event_target:spyEmpire }
				event_target:spyEmpire = {
					remove_relation_flag = { who = root flag = kiyo_spy_company_a }
					remove_relation_flag = { who = root flag = kiyo_spy_company_b }
				}
			}
			remove_country_flag = kiyo_spy_company_victim_a
			remove_country_flag = kiyo_spy_company_victim_b
		}
	}
	
	option = {
		name = UNFORTUNATE
		trigger = {
			OR = {
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_a }
					has_country_flag = kiyo_spy_company_victim_a
				}
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_company_b }
					has_country_flag = kiyo_spy_company_victim_b
				}
			}
		}
		
		hidden_effect = {
			event_target:spyEmpire = {
				remove_relation_flag = { who = root flag = kiyo_spy_company_a }
				remove_relation_flag = { who = root flag = kiyo_spy_company_b }
			}
			remove_country_flag = kiyo_spy_company_victim_a
			remove_country_flag = kiyo_spy_company_victim_b
		}
	}
}

#Resource Conservation
country_event = {
	id = kiyo_event_spy.51
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		any_country = {
			is_country_type = default
			has_communications = root
		}
		has_ethic = ethic_gestalt_consciousness
		NOR = {
			has_country_flag = kiyo_spy_conserve
			has_country_flag = kiyo_spy_conserve_end
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_country = {
					is_country_type = default
					has_communications = root
				}
			}
			random_list = {
				30 = {
					set_country_flag = kiyo_spy_conserve
					random_country = {
						limit = {
							NOT = { is_country = root }
							OR = {
								has_relation_flag = { who = root flag = kiyo_spy_spy1 }
								has_relation_flag = { who = root flag = kiyo_spy_spy2 }
								has_relation_flag = { who = root flag = kiyo_spy_spy3 }
								has_relation_flag = { who = root flag = kiyo_spy_spy4 }
							}
						}
						save_event_target_as = spyEmpire
						root = { save_event_target_as = spyVictim }
						country_event = { id = kiyo_event_spy.511 }
					}
					if = {
						limit = { any_country = { NOT = { has_relation_flag = { who = root flag = kiyo_spy_conserve } } } }
						random_list = {
							40 = { country_event = { id = kiyo_event_spy.513 days = 1440 random = 360 } }
							60 = { remove_country_flag = kiyo_spy_conserve }
						}
					}
				}
				70 = {}
			}
		}
	}
}

#Resource Conservation Spy Intervention
country_event = {
	id = kiyo_event_spy.511
	title = kiyo_event_spy.511.title
	desc = kiyo_event_spy.511.desc
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.511.a
		custom_tooltip = kiyo_event_spy.511.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_conserve_a days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_conserve_a } }
				country_event = { id = kiyo_event_spy.513 days = 1440 random = 360 }
			}
		}
	}
	
	option = {
		name = kiyo_event_spy.511.b
		custom_tooltip = kiyo_event_spy.511.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_conserve_b days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_conserve_b } }
				country_event = { id = kiyo_event_spy.513 days = 1440 random = 360 }
			}
		}
	}
}

#Resource Conservation Regular
country_event = {
	id = kiyo_event_spy.513
	title = kiyo_event_spy.513.title
	desc = kiyo_event_spy.513.desc
	picture = GFX_evt_mining_operations
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.513.a
		custom_tooltip = kiyo_event_spy.513.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_conserve_victim_a
			country_event = { id = kiyo_event_spy.515 days = 30 random = 30 }
		}
	}
	
	option = {
		name = kiyo_event_spy.513.b
		custom_tooltip = kiyo_event_spy.513.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_conserve_victim_b
			country_event = { id = kiyo_event_spy.515 days = 30 random = 30 }
		}
	}
}

#Resource Conservation Results Regular
country_event = {
	id = kiyo_event_spy.515
	title = kiyo_event_spy.515.title
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_b }
					has_country_flag = kiyo_spy_conserve_victim_a
				}
			}
		}
		text = kiyo_event_spy.515.descgooda
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_a }
			has_country_flag = kiyo_spy_conserve_victim_a
		}
		text = kiyo_event_spy.515.descbada
	}
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_a }
					has_country_flag = kiyo_spy_conserve_victim_b
				}
			}
		}
		text = kiyo_event_spy.515.descgoodb
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_b }
			has_country_flag = kiyo_spy_conserve_victim_b
		}
		text = kiyo_event_spy.515.descbadb
	}
	picture = GFX_evt_mining_operations
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_b }
						has_country_flag = kiyo_spy_conserve_victim_a
					}
				}
			}
			add_modifier = { modifier = kiyo_spy_conserve_minerals_good days = 1800 }
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_a }
				has_country_flag = kiyo_spy_conserve_victim_a
			}
			event_target:spyEmpire = {
				add_monthly_resource_mult = { resource = minerals value = 18 min = 600 max = 4000 }
				if = {
					limit = {
						OR = {
							has_relation_flag = { who = root flag = kiyo_spy_intrigue3 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue4 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue5 }
						}
					}
					add_monthly_resource_mult = { resource = minerals value = 18 min = 600 max = 4000 }
				}
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		else_if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_a }
						has_country_flag = kiyo_spy_conserve_victim_b
					}
				}
			}
			add_modifier = { modifier = kiyo_spy_conserve_energy_good days = 1800 }
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_b }
				has_country_flag = kiyo_spy_conserve_victim_b
			}
			event_target:spyEmpire = {
				add_monthly_resource_mult = { resource = energy value = 18 min = 600 max = 4000 }
				if = {
					limit = {
						OR = {
							has_relation_flag = { who = root flag = kiyo_spy_intrigue3 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue4 }
							has_relation_flag = { who = root flag = kiyo_spy_intrigue5 }
						}
					}
					add_monthly_resource_mult = { resource = energy value = 18 min = 600 max = 4000 }
				}
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		remove_country_flag = kiyo_spy_conserve
		set_timed_country_flag = { flag = kiyo_spy_conserve_end days = 1800 }
	}
	
	option = {
		name = INTERESTING
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_b }
					has_country_flag = kiyo_spy_conserve_victim_a
				}
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_a }
					has_country_flag = kiyo_spy_conserve_victim_b
				}
			}
		}
		
		hidden_effect = {
			if = {
				limit = { exists = event_target:spyEmpire }
				event_target:spyEmpire = {
					remove_relation_flag = { who = root flag = kiyo_spy_conserve_a }
					remove_relation_flag = { who = root flag = kiyo_spy_conserve_b }
				}
			}
			remove_country_flag = kiyo_spy_conserve_victim_a
			remove_country_flag = kiyo_spy_conserve_victim_b
		}
	}
	
	option = {
		name = PECULIAR
		trigger = {
			OR = {
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_a }
					has_country_flag = kiyo_spy_conserve_victim_a
				}
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_conserve_b }
					has_country_flag = kiyo_spy_conserve_victim_b
				}
			}
		}
		
		hidden_effect = {
			event_target:spyEmpire = {
				remove_relation_flag = { who = root flag = kiyo_spy_conserve_a }
				remove_relation_flag = { who = root flag = kiyo_spy_conserve_b }
			}
			remove_country_flag = kiyo_spy_conserve_victim_a
			remove_country_flag = kiyo_spy_conserve_victim_b
		}
	}
}

#Unknown Hacker
country_event = {
	id = kiyo_event_spy.61
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		any_country = {
			is_country_type = default
			has_communications = root
		}
		NOR = {
			has_country_flag = kiyo_spy_hacker
			has_country_flag = kiyo_spy_hacker_end
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_country = {
					is_country_type = default
					has_communications = root
				}
			}
			random_list = {
				30 = {
					set_country_flag = kiyo_spy_hacker
					random_country = {
						limit = {
							NOT = { is_country = root }
							OR = {
								has_relation_flag = { who = root flag = kiyo_spy_spy1 }
								has_relation_flag = { who = root flag = kiyo_spy_spy2 }
								has_relation_flag = { who = root flag = kiyo_spy_spy3 }
								has_relation_flag = { who = root flag = kiyo_spy_spy4 }
							}
						}
						save_event_target_as = spyEmpire
						root = { save_event_target_as = spyVictim }
						country_event = { id = kiyo_event_spy.611 }
					}
					if = {
						limit = { any_country = { NOT = { has_relation_flag = { who = root flag = kiyo_spy_hacker } } } }
						random_list = {
							40 = { country_event = { id = kiyo_event_spy.613 days = 1440 random = 360 } }
							60 = { remove_country_flag = kiyo_spy_hacker }
						}
					}
				}
				70 = {}
			}
		}
	}
}

#Unknown Hacker Spy Intervention
country_event = {
	id = kiyo_event_spy.611
	title = kiyo_event_spy.611.title
	desc = kiyo_event_spy.611.desc
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.611.a
		custom_tooltip = kiyo_event_spy.611.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_hacker_a days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_hacker_a } }
				country_event = { id = kiyo_event_spy.613 days = 1440 random = 360 }
			}
		}
	}
	
	option = {
		name = kiyo_event_spy.611.b
		custom_tooltip = kiyo_event_spy.611.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_hacker_b days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_hacker_b } }
				country_event = { id = kiyo_event_spy.613 days = 1440 random = 360 }
			}
		}
	}
}

#Unknown Hacker Regular
country_event = {
	id = kiyo_event_spy.613
	title = kiyo_event_spy.613.title
	desc = kiyo_event_spy.613.desc
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.613.a
		custom_tooltip = kiyo_event_spy.613.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_hacker_victim_a
			country_event = { id = kiyo_event_spy.615 days = 30 random = 30 }
		}
	}
	
	option = {
		name = kiyo_event_spy.613.b
		custom_tooltip = kiyo_event_spy.613.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_hacker_victim_b
			country_event = { id = kiyo_event_spy.615 days = 30 random = 30 }
		}
	}
}

#Unknown Hacker Results Regular
country_event = {
	id = kiyo_event_spy.615
	title = kiyo_event_spy.615.title
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_b }
					has_country_flag = kiyo_spy_hacker_victim_a
				}
			}
		}
		text = kiyo_event_spy.615.descgooda
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_a }
			has_country_flag = kiyo_spy_hacker_victim_a
		}
		text = kiyo_event_spy.615.descbada
	}
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_a }
					has_country_flag = kiyo_spy_hacker_victim_b
				}
			}
		}
		text = kiyo_event_spy.615.descgoodb
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_b }
			has_country_flag = kiyo_spy_hacker_victim_b
		}
		text = kiyo_event_spy.615.descbadb
	}
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_b }
						has_country_flag = kiyo_spy_hacker_victim_a
					}
				}
			}
			add_monthly_resource_mult = { resource = physics_research value = 18 min = 300 max = 2000 }
			add_monthly_resource_mult = { resource = society_research value = 18 min = 300 max = 2000 }
			add_monthly_resource_mult = { resource = engineering_research value = 18 min = 300 max = 2000 }
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_a }
				has_country_flag = kiyo_spy_hacker_victim_a
			}
			event_target:spyEmpire = {
				add_monthly_resource_mult = { resource = physics_research value = 18 min = 300 max = 2000 }
				add_monthly_resource_mult = { resource = society_research value = 18 min = 300 max = 2000 }
				add_monthly_resource_mult = { resource = engineering_research value = 18 min = 300 max = 2000 }
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		else_if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_a }
						has_country_flag = kiyo_spy_hacker_victim_b
					}
				}
			}
			add_influence = 150
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_b }
				has_country_flag = kiyo_spy_hacker_victim_b
			}
			event_target:spyEmpire = {
				add_influence = 150
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		remove_country_flag = kiyo_spy_hacker
		set_timed_country_flag = { flag = kiyo_spy_hacker_end days = 1800 }
	}
	
	option = {
		name = INTRIGUING
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_b }
					has_country_flag = kiyo_spy_hacker_victim_a
				}
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_a }
					has_country_flag = kiyo_spy_hacker_victim_b
				}
			}
		}
		
		hidden_effect = {
			if = {
				limit = { exists = event_target:spyEmpire }
				event_target:spyEmpire = {
					remove_relation_flag = { who = root flag = kiyo_spy_hacker_a }
					remove_relation_flag = { who = root flag = kiyo_spy_hacker_b }
				}
			}
			remove_country_flag = kiyo_spy_hacker_victim_a
			remove_country_flag = kiyo_spy_hacker_victim_b
		}
	}
	
	option = {
		name = WORRYING
		trigger = {
			OR = {
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_a }
					has_country_flag = kiyo_spy_hacker_victim_a
				}
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hacker_b }
					has_country_flag = kiyo_spy_hacker_victim_b
				}
			}
		}
		
		hidden_effect = {
			event_target:spyEmpire = {
				remove_relation_flag = { who = root flag = kiyo_spy_hacker_a }
				remove_relation_flag = { who = root flag = kiyo_spy_hacker_b }
			}
			remove_country_flag = kiyo_spy_hacker_victim_a
			remove_country_flag = kiyo_spy_hacker_victim_b
		}
	}
}

#Assassin for Hire
country_event = {
	id = kiyo_event_spy.71
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		any_country = {
			is_country_type = default
			has_communications = root
		}
		NOR = {
			has_country_flag = kiyo_spy_assassin
			has_country_flag = kiyo_spy_assassin_end
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_country = {
					is_country_type = default
					has_communications = root
				}
			}
			random_list = {
				50 = {
					set_country_flag = kiyo_spy_assassin
					random_country = {
						limit = {
							NOT = { is_country = root }
							OR = {
								has_relation_flag = { who = root flag = kiyo_spy_spy1 }
								has_relation_flag = { who = root flag = kiyo_spy_spy2 }
								has_relation_flag = { who = root flag = kiyo_spy_spy3 }
								has_relation_flag = { who = root flag = kiyo_spy_spy4 }
							}
						}
						save_event_target_as = spyEmpire
						root = { save_event_target_as = spyVictim }
						country_event = { id = kiyo_event_spy.711 }
					}
					if = {
						limit = { any_country = { NOT = { has_relation_flag = { who = root flag = kiyo_spy_assassin } } } }
						random_list = {
							40 = { country_event = { id = kiyo_event_spy.713 days = 1440 random = 360 } }
							60 = { remove_country_flag = kiyo_spy_assassin }
						}
					}
				}
				50 = {}
			}
		}
	}
}

#Assassin for Hire Spy Intervention
country_event = {
	id = kiyo_event_spy.711
	title = kiyo_event_spy.711.title
	desc = kiyo_event_spy.711.desc
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.711.a
		custom_tooltip = kiyo_event_spy.711.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_assassin_a days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_assassin_a } }
				country_event = { id = kiyo_event_spy.713 days = 1440 random = 360 }
			}
		}
	}
	
	option = {
		name = kiyo_event_spy.711.b
		custom_tooltip = kiyo_event_spy.711.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_assassin_b days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_assassin_b } }
				country_event = { id = kiyo_event_spy.713 days = 1440 random = 360 }
			}
		}
	}
}

#Assassin for Hire Regular
country_event = {
	id = kiyo_event_spy.713
	title = kiyo_event_spy.713.title
	desc = kiyo_event_spy.713.desc
	picture = GFX_evt_arguing_senate
	is_triggered_only = yes
	
	immediate = {
		random_owned_leader = {
			set_leader_flag = kiyo_spy_assassin_leader
			save_event_target_as = kiyo_spy_assassin_leader
		}
	}
	
	option = {
		name = kiyo_event_spy.713.a
		custom_tooltip = kiyo_event_spy.713.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_assassin_victim_a
			country_event = { id = kiyo_event_spy.715 days = 30 random = 30 }
		}
	}
	
	option = {
		name = kiyo_event_spy.713.b
		custom_tooltip = kiyo_event_spy.713.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_assassin_victim_b
			country_event = { id = kiyo_event_spy.715 days = 30 random = 30 }
		}
	}
}

#Assassin for Hire Results Regular
country_event = {
	id = kiyo_event_spy.715
	title = kiyo_event_spy.715.title
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_b }
					has_country_flag = kiyo_spy_assassin_victim_a
				}
			}
		}
		text = kiyo_event_spy.715.descgooda
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_a }
			has_country_flag = kiyo_spy_assassin_victim_a
		}
		text = kiyo_event_spy.715.descbada
	}
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_a }
					has_country_flag = kiyo_spy_assassin_victim_b
				}
			}
		}
		text = kiyo_event_spy.715.descgoodb
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_b }
			has_country_flag = kiyo_spy_assassin_victim_b
		}
		text = kiyo_event_spy.715.descbadb
	}
	picture = GFX_evt_arguing_senate
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_b }
						has_country_flag = kiyo_spy_assassin_victim_a
					}
				}
			}
			add_modifier = { modifier = kiyo_spy_assassin_guard days = 3600 }
			every_owned_leader = {
				limit = { has_leader_flag = kiyo_spy_assassin_leader }
				add_experience = 200
				remove_leader_flag = kiyo_spy_assassin_leader
			}
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_a }
				has_country_flag = kiyo_spy_assassin_victim_a
			}
			add_modifier = { modifier = kiyo_spy_assassin_guard days = 3600 }
			if = {
				limit = { has_ethic = ethic_gestalt_consciousness }
				add_modifier = { modifier = kiyo_spy_assassin_bad_gestalt days = 3600 }
			}
			else = {
				add_modifier = { modifier = kiyo_spy_assassin_bad days = 3600 }
			}
			every_owned_leader = {
				limit = { has_leader_flag = kiyo_spy_assassin_leader }
				remove_leader_flag = kiyo_spy_assassin_leader
				kill_leader = { show_notification = no }
			}
			event_target:spyEmpire = {
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		else_if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_a }
						has_country_flag = kiyo_spy_assassin_victim_b
					}
				}
			}
			add_modifier = { modifier = kiyo_spy_assassin_warrant days = 3600 }
			every_owned_leader = {
				limit = { has_leader_flag = kiyo_spy_assassin_leader }
				add_experience = 200
				remove_leader_flag = kiyo_spy_assassin_leader
			}
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_b }
				has_country_flag = kiyo_spy_assassin_victim_b
			}
			add_modifier = { modifier = kiyo_spy_assassin_warrant days = 3600 }
			if = {
				limit = { has_ethic = ethic_gestalt_consciousness }
				add_modifier = { modifier = kiyo_spy_assassin_bad_gestalt days = 3600 }
			}
			else = {
				add_modifier = { modifier = kiyo_spy_assassin_bad days = 3600 }
			}
			every_owned_leader = {
				limit = { has_leader_flag = kiyo_spy_assassin_leader }
				remove_leader_flag = kiyo_spy_assassin_leader
				kill_leader = { show_notification = no }
			}
			event_target:spyEmpire = {
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		remove_country_flag = kiyo_spy_assassin
		set_timed_country_flag = { flag = kiyo_spy_assassin_end days = 3600 }
	}
	
	option = {
		name = INTRIGUING
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_b }
					has_country_flag = kiyo_spy_assassin_victim_a
				}
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_a }
					has_country_flag = kiyo_spy_assassin_victim_b
				}
			}
		}
		
		hidden_effect = {
			if = {
				limit = { exists = event_target:spyEmpire }
				event_target:spyEmpire = {
					remove_relation_flag = { who = root flag = kiyo_spy_assassin_a }
					remove_relation_flag = { who = root flag = kiyo_spy_assassin_b }
				}
			}
			remove_country_flag = kiyo_spy_assassin_victim_a
			remove_country_flag = kiyo_spy_assassin_victim_b
		}
	}
	
	option = {
		name = WORRYING
		trigger = {
			OR = {
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_a }
					has_country_flag = kiyo_spy_assassin_victim_a
				}
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_assassin_b }
					has_country_flag = kiyo_spy_assassin_victim_b
				}
			}
		}
		
		hidden_effect = {
			event_target:spyEmpire = {
				remove_relation_flag = { who = root flag = kiyo_spy_assassin_a }
				remove_relation_flag = { who = root flag = kiyo_spy_assassin_b }
			}
			remove_country_flag = kiyo_spy_assassin_victim_a
			remove_country_flag = kiyo_spy_assassin_victim_b
		}
	}
}

#Naval Maintenance
country_event = {
	id = kiyo_event_spy.81
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		any_country = {
			is_country_type = default
			has_communications = root
		}
		NOR = {
			has_country_flag = kiyo_spy_hijack
			has_country_flag = kiyo_spy_hijack_end
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_country = {
					is_country_type = default
					has_communications = root
				}
			}
			random_list = {
				40 = {
					set_country_flag = kiyo_spy_hijack
					random_country = {
						limit = {
							NOT = { is_country = root }
							OR = {
								has_relation_flag = { who = root flag = kiyo_spy_spy1 }
								has_relation_flag = { who = root flag = kiyo_spy_spy2 }
								has_relation_flag = { who = root flag = kiyo_spy_spy3 }
								has_relation_flag = { who = root flag = kiyo_spy_spy4 }
							}
						}
						save_event_target_as = spyEmpire
						root = { save_event_target_as = spyVictim }
						country_event = { id = kiyo_event_spy.811 }
					}
					if = {
						limit = { any_country = { NOT = { has_relation_flag = { who = root flag = kiyo_spy_hijack } } } }
						random_list = {
							40 = { country_event = { id = kiyo_event_spy.813 days = 1440 random = 360 } }
							60 = { remove_country_flag = kiyo_spy_hijack }
						}
					}
				}
				60 = {}
			}
		}
	}
}

#Naval Maintenance Spy Intervention
country_event = {
	id = kiyo_event_spy.811
	title = kiyo_event_spy.811.title
	desc = kiyo_event_spy.811.desc
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.811.a
		custom_tooltip = kiyo_event_spy.811.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_hijack_a days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_hijack_a } }
				country_event = { id = kiyo_event_spy.813 days = 1440 random = 360 }
			}
		}
	}
	
	option = {
		name = kiyo_event_spy.811.b
		custom_tooltip = kiyo_event_spy.811.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_hijack_b days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_hijack_b } }
				country_event = { id = kiyo_event_spy.813 days = 1440 random = 360 }
			}
		}
	}
}

#Naval Maintenance Regular
country_event = {
	id = kiyo_event_spy.813
	title = kiyo_event_spy.813.title
	desc = kiyo_event_spy.813.desc
	picture = GFX_evt_space_hangar
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.813.a
		custom_tooltip = kiyo_event_spy.813.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_hijack_victim_a
			country_event = { id = kiyo_event_spy.815 days = 30 random = 30 }
		}
	}
	
	option = {
		name = kiyo_event_spy.813.b
		custom_tooltip = kiyo_event_spy.813.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_hijack_victim_b
			country_event = { id = kiyo_event_spy.815 days = 30 random = 30 }
		}
	}
}

#Naval Maintenance Results Regular
country_event = {
	id = kiyo_event_spy.815
	title = kiyo_event_spy.815.title
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_b }
					has_country_flag = kiyo_spy_hijack_victim_a
				}
			}
		}
		text = kiyo_event_spy.815.descgooda
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_a }
			has_country_flag = kiyo_spy_hijack_victim_a
		}
		text = kiyo_event_spy.815.descbada
	}
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_a }
					has_country_flag = kiyo_spy_hijack_victim_b
				}
			}
		}
		text = kiyo_event_spy.815.descgoodb
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_b }
			has_country_flag = kiyo_spy_hijack_victim_b
		}
		text = kiyo_event_spy.815.descbadb
	}
	picture = GFX_evt_space_hangar
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_b }
						has_country_flag = kiyo_spy_hijack_victim_a
					}
				}
			}
			add_modifier = { modifier = kiyo_spy_hijack_ai_good days = 3600 }
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_a }
				has_country_flag = kiyo_spy_hijack_victim_a
			}
			add_modifier = { modifier = kiyo_spy_hijack_ai_bad days = 3600 }
			event_target:spyEmpire = {
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		else_if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_a }
						has_country_flag = kiyo_spy_hijack_victim_b
					}
				}
			}
			add_modifier = { modifier = kiyo_spy_hijack_inventory_good days = 3600 }
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_b }
				has_country_flag = kiyo_spy_hijack_victim_b
			}
			kiyo_spy_destroy_ships = yes
			event_target:spyEmpire = {
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_up }
				country_event = { id = kiyo_event_spy.1111 }
			}
		}
		remove_country_flag = kiyo_spy_hijack
		set_timed_country_flag = { flag = kiyo_spy_hijack_end days = 3600 }
	}
	
	option = {
		name = INCREDIBLE
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_b }
					has_country_flag = kiyo_spy_hijack_victim_a
				}
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_a }
					has_country_flag = kiyo_spy_hijack_victim_b
				}
			}
		}
		
		hidden_effect = {
			if = {
				limit = { exists = event_target:spyEmpire }
				event_target:spyEmpire = {
					remove_relation_flag = { who = root flag = kiyo_spy_hijack_a }
					remove_relation_flag = { who = root flag = kiyo_spy_hijack_b }
				}
			}
			remove_country_flag = kiyo_spy_hijack_victim_a
			remove_country_flag = kiyo_spy_hijack_victim_b
		}
	}
	
	option = {
		name = TERRIBLE
		trigger = {
			OR = {
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_a }
					has_country_flag = kiyo_spy_hijack_victim_a
				}
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_hijack_b }
					has_country_flag = kiyo_spy_hijack_victim_b
				}
			}
		}
		
		hidden_effect = {
			event_target:spyEmpire = {
				remove_relation_flag = { who = root flag = kiyo_spy_hijack_a }
				remove_relation_flag = { who = root flag = kiyo_spy_hijack_b }
			}
			remove_country_flag = kiyo_spy_hijack_victim_a
			remove_country_flag = kiyo_spy_hijack_victim_b
		}
	}
}

#Spy Check
country_event = {
	id = kiyo_event_spy.91
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		any_country = {
			is_country_type = default
			has_communications = root
		}
		NOR = {
			has_country_flag = kiyo_spy_check
			has_country_flag = kiyo_spy_check_end
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_country = {
					is_country_type = default
					has_communications = root
				}
			}
			random_list = {
				40 = {
					set_country_flag = kiyo_spy_check
					random_country = {
						limit = {
							NOT = { is_country = root }
							OR = {
								has_relation_flag = { who = root flag = kiyo_spy_spy1 }
								has_relation_flag = { who = root flag = kiyo_spy_spy2 }
								has_relation_flag = { who = root flag = kiyo_spy_spy3 }
								has_relation_flag = { who = root flag = kiyo_spy_spy4 }
							}
						}
						save_event_target_as = spyEmpire
						root = { save_event_target_as = spyVictim }
						country_event = { id = kiyo_event_spy.911 }
					}
					if = {
						limit = { any_country = { NOT = { has_relation_flag = { who = root flag = kiyo_spy_check } } } }
						random_list = {
							40 = { country_event = { id = kiyo_event_spy.913 days = 1440 random = 360 } }
							60 = { remove_country_flag = kiyo_spy_check }
						}
					}
				}
				60 = {}
			}
		}
	}
}

#Spy Check Spy Intervention
country_event = {
	id = kiyo_event_spy.911
	title = kiyo_event_spy.911.title
	desc = kiyo_event_spy.911.desc
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.911.a
		custom_tooltip = kiyo_event_spy.911.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_check_a days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_check_a } }
				country_event = { id = kiyo_event_spy.913 days = 1440 random = 360 }
			}
		}
	}
	
	option = {
		name = kiyo_event_spy.911.b
		custom_tooltip = kiyo_event_spy.911.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			random_owned_pop = { limit = { is_species = root } add_modifier = { modifier = kiyo_spy_check_b days = 720 } }
			event_target:spyVictim = {
				root = { set_relation_flag = { who = prev flag = kiyo_spy_check_b } }
				country_event = { id = kiyo_event_spy.913 days = 1440 random = 360 }
			}
		}
	}
}

#Spy Check Regular
country_event = {
	id = kiyo_event_spy.913
	title = kiyo_event_spy.913.title
	desc = kiyo_event_spy.913.desc
	picture = GFX_evt_space_hangar
	is_triggered_only = yes
	
	option = {
		name = kiyo_event_spy.913.a
		custom_tooltip = kiyo_event_spy.913.a.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_check_victim_a
			country_event = { id = kiyo_event_spy.915 days = 30 random = 30 }
		}
	}
	
	option = {
		name = kiyo_event_spy.913.b
		custom_tooltip = kiyo_event_spy.913.b.tooltip
		ai_chance = {
			factor = 50
		}
		
		hidden_effect = {
			set_country_flag = kiyo_spy_check_victim_b
			country_event = { id = kiyo_event_spy.915 days = 30 random = 30 }
		}
	}
}

#Spy Check Results Regular
country_event = {
	id = kiyo_event_spy.915
	title = kiyo_event_spy.915.title
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_b }
			has_country_flag = kiyo_spy_check_victim_a
		}
		text = kiyo_event_spy.915.descgooda
	}
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_a }
					has_country_flag = kiyo_spy_check_victim_a
				}
			}
		}
		text = kiyo_event_spy.915.descbada
	}
	desc = {
		trigger = {
			exists = event_target:spyEmpire
			reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_a }
			has_country_flag = kiyo_spy_check_victim_b
		}
		text = kiyo_event_spy.915.descgoodb
	}
	desc = {
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_b }
					has_country_flag = kiyo_spy_check_victim_b
				}
			}
		}
		text = kiyo_event_spy.915.descbadb
	}
	picture = GFX_evt_space_hangar
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_b }
				has_country_flag = kiyo_spy_check_victim_a
			}
			add_modifier = { modifier = kiyo_spy_check_unity days = 1800 }
			event_target:spyEmpire = {
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_down }
				country_event = { id = kiyo_event_spy.1112 }
			}
		}
		else_if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_a }
						has_country_flag = kiyo_spy_check_victim_a
					}
				}
			}
			add_modifier = { modifier = kiyo_spy_check_unity days = 1800 }
		}
		else_if = {
			limit = {
				exists = event_target:spyEmpire
				reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_a }
				has_country_flag = kiyo_spy_check_victim_b
			}
			add_modifier = { modifier = kiyo_spy_check_security days = 1800 }
			event_target:spyEmpire = {
				set_relation_flag = { who = root flag = kiyo_spy_intrigue_down }
				country_event = { id = kiyo_event_spy.1112 }
			}
		}
		else_if = {
			limit = {
				OR = {
					NOT = { exists = event_target:spyEmpire }
					AND = {
						exists = event_target:spyEmpire
						reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_b }
						has_country_flag = kiyo_spy_check_victim_b
					}
				}
			}
			add_modifier = { modifier = kiyo_spy_check_security days = 1800 }
		}
		remove_country_flag = kiyo_spy_check
		set_timed_country_flag = { flag = kiyo_spy_check_end days = 1800 }
	}
	
	option = {
		name = GOOD
		trigger = {
			OR = {
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_b }
					has_country_flag = kiyo_spy_check_victim_a
				}
				AND = {
					exists = event_target:spyEmpire
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_a }
					has_country_flag = kiyo_spy_check_victim_b
				}
			}
		}
		
		hidden_effect = {
			if = {
				limit = { exists = event_target:spyEmpire }
				event_target:spyEmpire = {
					remove_relation_flag = { who = root flag = kiyo_spy_check_a }
					remove_relation_flag = { who = root flag = kiyo_spy_check_b }
				}
			}
			remove_country_flag = kiyo_spy_check_victim_a
			remove_country_flag = kiyo_spy_check_victim_b
		}
	}
	
	option = {
		name = OK
		trigger = {
			OR = {
				NOT = { exists = event_target:spyEmpire }
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_a }
					has_country_flag = kiyo_spy_check_victim_a
				}
				AND = {
					reverse_has_relation_flag = { who = event_target:spyEmpire flag = kiyo_spy_check_b }
					has_country_flag = kiyo_spy_check_victim_b
				}
			}
		}
		
		hidden_effect = {
			event_target:spyEmpire = {
				remove_relation_flag = { who = root flag = kiyo_spy_check_a }
				remove_relation_flag = { who = root flag = kiyo_spy_check_b }
			}
			remove_country_flag = kiyo_spy_check_victim_a
			remove_country_flag = kiyo_spy_check_victim_b
		}
	}
}

#Free Speech
country_event = {
	id = kiyo_event_spy.1000
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			OR = {
				reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue2 }
				reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue3 }
				reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue4 }
				reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue5 }
			}
		}
	}
	
	immediate = {
		every_country = {
			limit = {
				OR = {
					reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue2 }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue3 }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue4 }
					reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue5 }
				}
			}
			if = { limit = {reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue2 } }
				set_variable = { which = kiyo_spy_free_speech value = 2 }
				kiyo_spy_free_speech = yes
			}
			if = { limit = {reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue2 } }
				set_variable = { which = kiyo_spy_free_speech value = 6 }
				kiyo_spy_free_speech = yes
			}
			if = { limit = {reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue2 } }
				set_variable = { which = kiyo_spy_free_speech value = 8 }
				kiyo_spy_free_speech = yes
			}
			if = { limit = {reverse_has_relation_flag = { who = root flag = kiyo_spy_intrigue2 } }
				set_variable = { which = kiyo_spy_free_speech value = 10 }
				kiyo_spy_free_speech = yes
				every_owned_planet = {
					if = {
						limit = { owner = { NOT = { has_ethic = ethic_gestalt_consciousness } } }
						random_list = {
							20 = { add_modifier = { modifier = kiyo_spy_speech_unrest days = 1800 } }
							80 = {}
						}
					}
					else_if = {
						limit = { owner = { has_ethic = ethic_gestalt_consciousness } }
						random_list = {
							20 = { add_modifier = { modifier = kiyo_spy_speech_unrest_gestalt days = 1800 } }
							80 = {}
						}
					}
				}
			}
		}
	}
}

#Spy Good
country_event = {
	id = kiyo_event_spy.1111
	title = kiyo_event_spy.1111.title
	desc = kiyo_event_spy.1111.desc
	picture = GFX_evt_alien_segregation
	is_triggered_only = yes
	
	immediate = {
		kiyo_spy_increase_intrigue = yes
	}
	
	option = {
		name = GOOD
	}
}

#Spy Bad
country_event = {
	id = kiyo_event_spy.1112
	title = kiyo_event_spy.1112.title
	desc = kiyo_event_spy.1112.desc
	picture = GFX_evt_news_room
	is_triggered_only = yes
	
	immediate = {
		kiyo_spy_decrease_intrigue = yes
	}
	
	option = {
		name = CURSES
	}
}

#Max intrigue on neighbors for rebels
country_event = {
	id = kiyo_event_spy.1113
	hide_window = yes
	
	trigger = {
		OR = {
			has_country_flag = slave_rebels
			has_country_flag = standard_unrest_rebels
		}
		NOT = { has_country_flag = kiyo_spy_rebel_intrigue }
	}
	
	immediate = {
		set_country_flag = kiyo_spy_rebel_intrigue
		every_country = {
			limit = {
				is_country_type = default
				OR = {
					reverse_has_relation_flag = { who = root flag = rebelling_slaves_former_owner }
					is_neighbor_of = root
				}
			}
			if = {
				limit = { NOT = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy1 } } }
				root = { set_relation_flag = { who = prev flag = kiyo_spy_spy1 } }
			}
			else_if = {
				limit = { NOT = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy2 } } }
				root = { set_relation_flag = { who = prev flag = kiyo_spy_spy2 } }
			}
			else_if = {
				limit = { NOT = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy3 } } }
				root = { set_relation_flag = { who = prev flag = kiyo_spy_spy3 } }
			}
			else_if = {
				limit = { NOT = { reverse_has_relation_flag = { who = root flag = kiyo_spy_spy4 } } }
				root = { set_relation_flag = { who = prev flag = kiyo_spy_spy4 } }
			}
			set_relation_flag = { who = event_target:maybeRevolted flag = kiyo_spy_intrigue5 }
		}
	}
}